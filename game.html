<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Köroğlu Oyunu</title>
    <style>
    html { 
      height: 100%;
      background: url(images/dawid-zawila-253510-unsplash.jpg) no-repeat center center fixed; 
      -webkit-background-size: cover;
      -moz-background-size: cover;
      -o-background-size: cover;
      background-size: cover;
    }

    body {
      height: 100%;
    }

    .button {
      background-color: red;
      border: none;
      color: black;
      padding: 8px 16px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 15px;
      margin: 6px 6px;
      cursor: pointer;
      border-radius: 8px;
      font-family: Arial;
      box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    }

    .header {
      color: red;
      font-family: Arial;
      font-size: 45px;
    }

    .container{
      text-align: center;
      background-color: #fff;
      display: block;
      margin: 10px;
      margin-right: auto;
      box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
    }

    ul {
      list-style-type: none;
      margin: 10;
      padding: 0;
      overflow: hidden;
      background-color: orange;
    }
    
    li {
      float: left;
    }
    
    /* The Modal (background) */
    .modal {
        display: none; /* Hidden by default */
        position: fixed; /* Stay in place */
        z-index: 1; /* Sit on top */
        padding-top: 100px; /* Location of the box */
        left: 0;
        top: 0;
        width: 100%; /* Full width */
        height: 100%; /* Full height */
        overflow: auto; /* Enable scroll if needed */
        background-color: rgb(0,0,0); /* Fallback color */
        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    }

    /* Modal Content */
    .modal-content {
        background-color: #fefefe;
        margin: auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
    }

    /* The Close Button */
    .close {
        color: #aaaaaa;
        float: right;
        font-size: 28px;
        font-weight: bold;
    }

    .close:hover,
    .close:focus {
        color: #000;
        text-decoration: none;
        cursor: pointer;
    }
    </style>
  </head>
  <body>

  <ul>
    <li>
      <div class="container">
        <img src="images/sword.png" style="margin-left: 50px; margin-right: 50px; margin-top: 5px; height: 50px; transform: rotate(90deg);">
        <p id="fightpower">20</p>
      </div>
    </li>
    <li>
      <div class="container">
        <img src="images/money.png" style="margin-left: 50px; margin-right: 50px; margin-top: 5px; height: 50px;">
        <p id="money">20</p>
      </div>
    </li>
    <li>
      <div class="container">
        <img src="images/horse.png" style="margin-left: 50px; margin-right: 50px; margin-top: 5px; height: 50px;">
        <p id="horse">20</p>
      </div>
    </li>
    <li>
      <div class="container">
        <img src="images/hearth.png" style="margin-left: 50px; margin-right: 50px; margin-top: 5px; height: 50px;">
        <p id="health">20</p>
      </div>
    </li>
    <li>
      <div class="container">
        <img src="images/food.png" style="margin-left: 50px; margin-right: 50px; margin-top: 5px; height: 50px;">
        <p id="food">20</p>
      </div>
    </li>
    <li>
      <div class="container">
        <h2 style="margin-left: 50px; margin-right: 50px; margin-top: 5px;padding-top: 5px; height: 50px;">SEVİYE</h2>
        <p id="level">20</p>
      </div>
    </li>
    <li>
      <div class="container">
        <h2 style="margin-left: 50px; margin-right: 50px; margin-top: 5px;padding-top: 5px; height: 50px;">DENEYİM</h2>
        <p id="experiences">Ticari: 20 | Savaşçı: 20 | Yetiştirici: 10</p>
      </div>
    </li>
  </ul>

  <canvas id="myCanvas" width="1400" height="600">
    <img src="images/oca.png" id="villageimage">
    <img src="images/castle.png" id="castleimage">
    <img src="images/horse.png" id="horseimage">
    <img src="images/ottomany.png" id="ottomanboyimage">
    <img src="images/old-house-clipart-1.png" id="houseimage">
    <img src="images/market.png" id="marketimage">
    <img src="images/DedeKorkut.png" id="dedekorkutimage">
    <img src="images/aksiyonlar.png" id="aksiyonlarimage">
    <img src="images/to-do.png" id="todoimage">
  </canvas>

  <div id="dedekorkutModal" class="modal">

    <!-- Modal content -->
    <div class="modal-content">
      <span class="close" id="dedekorkutclose">&times;</span>
      <p>Deneyim Kazanmak için Soruları Doğru Cevaplamalısın!</p>
      <br>
      <p id="soru">Bu soru metnidir!</p>
      <button id="A" onclick="answered('A')">A: Cevap A mı?</button>
      <button id="B" onclick="answered('B')">B: Cevap B mi?</button>
      <button id="C" onclick="answered('C')">C: Cevap C mi?</button>
      <button id="D" onclick="answered('D')">D: Cevap D mi?</button>
      <p id="demo3"></p>

    </div>
  
  </div>
  
  <div id='pazaryerimodal' class = 'modal'>
    <div class="modal-content">
        <span class = "close" id="pazaryericlose">&times;</span>
        <h1>Pazar Yeri</h1>

        <br>At = 5 altın | Yemek = 2 altın | Silah = 4 altın | İlaç = 3 altın</br>      
      
        <button type="button"
        onclick = "Atsatis() "> 
        At sat </button>

        <button type="button1"
        onclick = "Yemekalis()"> 
        Yemek Al </button>

        <button type="button"
        onclick = "document.getElementById('demo').innerHTML = 'At sayın: ' + At "> 
        At sayısı </button>

        <button type="button"
        onclick = "Silahalis()"> 
        Silah Al </button>

        <button type="button"
        onclick = "Ilacalis()"> 
        İlaç Al </button>

        <p id="demo"></p>

    </div>
  </div>

  <div id='aksiyonlarmodal' class = 'modal'>
    <div class="modal-content">
        <span class = "close" id="aksiyonlarclose">&times;</span>
        <h1>Aksiyonlar</h1>

        <button type="button" onclick = "AtYetistirme()"> At Yetiştir </button>
       
        <button type="button" onclick = "KiratImprove()"> Kır Atı Geliştir </button>

        <button type="button1" onclick = "BattleToBolu()"> Bolu ile Savaş </button>

        <button type="button1" onclick = "RobberyforKervan()"> Kervan Soy </button>

        <p id="demo2"></p>

        <script type="text/javascript">

        </script>
    </div>
  </div>
    <div id='gorevlermodal' class = 'modal'>
      <div class="modal-content">
          <span class = "close" id="gorevlerclose">&times;</span>
          <h1>Gorevler</h1>
  
          <br><button type="button" onclick = "gorev_ara()"> Görev-1: Ekmek Almaya Giderken Yolun Kesilip Ekmeklerin Çalındı. </button></br>
    
          <br><button type="button" onclick = "gorev_ara()"> Görev-2: Ekmeklerin Çalınmasından Sıkılıp Çivili Sopa Hazırla. </button></br>
  
          <br><button type="button1" onclick = "gorev_1()"> Görev-3: Babanı Gururlandır!! </button></br>
  
          <br><button type="button1" onclick = "gorev_ara()"> Görev-4: Kır Atı Bolu Beyinden Iste. </button></br>
  
          <br><button type="button1" onclick = "gorev_2()"> Görev-5: Kır Atı Eğit. </button></br>

          <br><button type="button1" onclick = "gorev_3()"> Görev-6: Babanla Birlikte Bolu'dan Kaç. </button></br>
          
          <br><button type="button1" onclick = "gorev_ara()"> Görev-7: Köpükleri Babana Götür. </button></br>

          <br><button type="button1" onclick = "gorev_4()"> Görev-8: Telli Nigar'ı kaçır. </button></br>

          <br><button type="button1" onclick = "gorev_5()"> Görev-9: Çamlıbel'e Git ve Köse Kenan'ın Adamlarına Kafa Tut </button></br>

          <br><button type="button1" onclick = "gorev_6()"> Görev-10: Ilk Kervanını Soymaya Giriş </button></br>

          <br><button type="button1" onclick = "gorev_7()"> Görev-11: Ilk Birkaç Denemede Başarısız Olduktan Sonra Yenilmezi Yen! </button></br>

          <br><button type="button1" onclick = "gorev_8()"> Görev-12: 40 Gün 40 Gece Düğün. </button></br>


          <p id="demo2"></p>
  
          <script type="text/javascript">
            //ADDED
          </script>
      </div> 
    </div>

  <script>
    sorular = ["Bolu Beyinin hangi milletle arası iyi değildir?",
               "Bolu Beyi neyi ile ünlüdür?",
               "Bolu Beyini kim ünlü etmiştir?",
               "Koca Yusuf'un lakabı nedir?",
               "Yusuf kır atı kaç kere götürmüştür?",
               "Kır at en son nerede bırakıldığında eve dönmemiştir?",
               "Hangisi Koca Yusuf'un babasının vasiyetinde yoktur?",
               "Koca Yusufun oğlunun adı nedir?",
               "Ruşen Alinin takma adı nedir?",
               "Bolu Beyi, Koca Yusuf'a ne yaptırmıştır?",
               "Köroğlu ilk defa ne yaptıktan sonra Koca Yusuf herşeyden çok sevinmiştir?",
               "Koca Yusuf, Köroğlu'nun serserileri kovalamasından sonra ondan ne istemiştir?",
               "Koca Yusuf, Bolu Beyi'nin kır ata bakmadığını öğrendiğinde Köroğlu'ndan ne istemiştir?",
               "Bolu Beyi kır atı razı olarak mı vermiştir? Neden?",
               "Koca Yusuf neden Köroğlu'na atı çamurun üstünde koşturmasını istemiştir?",
               "Bolu Beyi'nin pişman olma sebebi nedir?",
               "Ruşen Ali'nin beşik kertmesi kimdir?",
               "Bolu Beyi kır at için ne kadar para teklif etmiştir?",
               "Bolu Beyi'nin bu teklifine karşılık Koca Yusuf ne istemiştir?",
               "Bolu Beyi'nin birinci cengaveri olarak tanımlanan kişi kimdir?",
               "Reyhan Arap'ın yaşadığı çelişki nedir?",
               "Köroğlu ve Koca Yusuf doru atı nasıl atlatmışlardır?",
               "Reyhan Arap öldürülmüş/bayıltılmış mıdır? Kim bunu yapmıştır?",
               "Köpükler nereden gelmektedir?",
               "Dereden gelen kaç tane köpük vardır?",
               "Köpüklerin renkleri nelerdir?",
               "Hangisi Ruşen Ali'nin içtiği köpüklerden biridir?",
               "Hangi renkteki köpük Ruşen Ali'yi aşık etmiştir?",
               "Çamlıbel neresidir?",
               "Koca Yusuf'un ölmeden önce yaptığı şey nedir?",
               "Koca yusuf'un oğluna son vasiyeti nedir?",
               "Köroğlu'nun sevdiceği kimdir?",
               "Telli Nigar kimin kardeşidir?",
               "Telli Nigar'ı kim istemiştir?",
               "Telli nigar nasıl tanınmaktadır?",
               "Köroğlu kır atı nasıl tanımıştır?",
               "Köroğlu babasının son vasiyetini gerçekleştirmiş midir?",
               "Köroğlu pınarın kenarında dinlenirken hangi neyi avlayıp getirmiştir?",
               "Kim Çamlıbel'in sahibidir?",
               "Köroğlu, Köse Kenan ile dövüşmüş müdür? Kim kazanmıştır?",
               "Köse Kenan'ın, Köroğluna sen icat et dediği şey nedir?",
               "Köroğlu'nun bundan sonra akıl hocası kimdir?",
               "Köroğlu'nun ilk soymaya çalıştığı şey nedir?",
               "Köroğlu ilk soygununu nasıl yapmıştır?",
               "Köroğlu'nun ilk soymayı başardığı kişi ne ile öne çıkmıştır?",
               "Kervanlardan soyulan şeyler kimlere veriliyordur?",
               "Köse Kenan Köroğlu'na ne olacağını söylemiştir",
               "Köse Kenan bezirganbaşına(Köroğlu'nun bayılttığı kişi) ne yapmıştır?",
               "Köse Kenan, Köroğluna neyin sözünü verip tutmuştur?"]

    cevaplar = [["Osmanlı" , "Diğer Anadolu Beyleri" , "Frenkler" , "İranlılar"],
                ["Yakışıklı olmasıyla", "Devletinin gücüyle", "Atlarıyla" ,"Kendi fiziksel gücüyle"],
                ["Köroğlu" , "Koca Yusuf" , "Kendisi" , "Padişah"],
                ["Atların Sultanı" , "Atların Kralı" , "Atların Padişahı", "Atların Beyi"],
                ["1" , "3" , "5" , "2"],
                ["Bereketli bir ovada", "Sık ağaçlı bir ormanda", "Gözün gözü görmediği çok sisli bir vadide", "Masmavi denizin olduğu Sahilde"],
                ["Başına buyruk ol", "Evlenirsen eşin Osmanlı soyundan olsun", "At yetiştirmeye devam et" , "Kula kul olma"], ["Muhammed Ali" , "Ruşen Ali", "Rasim Ali" , "Rahman Ali"], ["Körçocuğu" , "Körevladı" , "Köroğlu" , "Atçıoğlu"], ["Astırmıştır" , "Kellesini vurdurmuştur" , "Ellerini kestirmiştir" , "Gözlerine mil çektirmiştir"], ["Serserileri sopa ile kovalayıp aldığı ekmekleri kaptırmayınca", "Bolu Beyi'nin karşısına çıkıp beyliği isteyince", "Osmanlı ile bir olup Bolu Beyini devirip beyliği alınca", "Bolu Beyi'nin tüm atlarını öldürünce"], ["Onu Bolu Beyinin tavlasına sokmasını istemiştir", "Bolu Beyinin tüm atlarını öldürmesini istemiştir" , "Bolu Beyinin tavlasını yakmasını istemiştir" , "Bolu Beyinin yaşadığı yeri yakmasını istemiştir."], ["Bolu Beyine baskın yapıp kır atı çalmasını", "Sessizce gidip Bolu Beyini öldürmesi" , "Bolu'Beyinden kır atı istemesini" , "Bolu Beyine baskın yapıp onu öldürmesini"],["Evet. Atlar çok kötü durumdaydı ve boşuna bakıyorlardı" , "Evet. Koca Yusuf'un kır atı çok sevdiğinden dolayı onun olduğunu düşündü" , "Hayır. Köroğlu'ndan bir miktar altın istemiştir.", "Hayır. Koca Yusuf'u saray'a getirip öldürülmesine müsaade etmesini istemiştir."],["Atın çamurda batarak ölmesini istediği için" , "Oğlunun kötü bir sürücü olduğunu göstermek için" , "Atı eğitmek için" , "Atın hazır olup olmadığını anlamak için"],["Köroğlu'na verdiği atı çok güzel bir şekilde gördüğünden dolayı", "Köroğlu'na verdiği at öldüğünden dolayı Koca Yusuf da üzgünlüğünden öldüğünden", "Köroğlu'na verdiği at ile birlikte Koca Yusuf'un çok sevdiği üç atın çok güzel atlar olmasından dolayı Koca Yusuf'a bir anlık sinirle mil çektirmesi" ,"Osmanlı'ya bu atları yollamadı için"],["Komşusunun kızı", "Bolu beyinin kız kardeşi" , "Koca Yusuf'un yeğeni" , "Bolu beyinin kızı"],["49000 altın" , "20000 altın" , "30210 altın" , "Ne kadar istiyor ise o kadar altın"],["Hazinedeki bütün altını" , "Bir çift göz" , "Ülkenin topraklarının dörtte birini" , "Diğer iki atın Osmanlı'ya verilmemesini"],["Reyhan Arap" , "Reyhan Türk", "Ramiz Arap" , "Ramiz Türk"],["İntihar edip etmeme çelişkisi" , "Bolu Beyi'ni öldürüp öldürmeme çelişkisi" , "Koca Yusuf ve oğlunu öldürüp öldürmeme çelişkisi" , "Hristiyan olup olmama çelişkisi],[Yola çivi atarak" , "Koca Yusuf kendini feda etmiştir" , "Kumsala sürmüşlerdir" , "Köroğlu kendini feda etmiştir"],["Ölmüştür. Köroğlu yapmıştır" , "Bayılmıştır. Köroğlu yapmıştır" , "Ölmüştür. Koca Yusuf yapmıştır" , "Bayılmıştır. Kocayusuf yapmıştır"],["Köprüden" , "Havadan" , "Dereden" , "Ormandan"],["Üç", "Beş","Dört","Yedi"],["Yeşil, kırmızı, boz", "Yeşil, sarı, boz", "Turuncu, yeşil, sarı", "Kırmızı, boz, turuncu"],["Boz", "Turkuaz", "Bordo", "Mor"],["Sarı","Mavi","Yeşil","Boz"], ["Birçok yerden gelen ve bir çok yere giden kervanların kesin olarak geçtiği yerdir.", "Deniz'in en güzel göründüğü, kimsenin bilmediği kuytu bir yer.", "Bolu Beyi'nin en sevdiği havasının çok ferah olduğu bir yer.", "Haydutların en çok barındığı bir yer."], ["Bolu Beyi'ne hançer saplamak","Oğluna şiir okumak","Köpükleri içmek", "Bolu Beyi ile şavaşmak"],["Bolu Beyi'ni öldürmesi","Sevdiceğini geri alması","Bolu'dan biri ile evlenmemesi","Çamlıbel'den başka yerde yuva yapmaması"],["Yoktur","Geveze Nigar","Telli Necmiye","Telli Nigar"],["Bolu Beyi","Koca Yusuf","Köroğlu","Osmanlı padişahı"],["Osmanlı Veziri", "Osmanlı padişahının oğlu", "Osmanlı padişahı", "Osmanlı Veziri'nin oğlu"],["Güzel", "Kurnaz/Zeki", "Acımasız", "Çirkin"],["Kulağının arkasındaki mavi benekten", "Koşturup hızından","Vücudunun şeklinden","Toynaklarının şeklinden"],["Evet","Hayır"],["Bıldırcın","Geyik","İnek","Üveyik"],["Köse Soykut","Köse Kenan","Köse Cihan","Köse Kudret"],["Dövüşmüşür, berabere","Dövüşmüştür, Köroğlu","Dövüşmüştür, Köse Kenan","Dövüşmemiştir"],["Kelle kesmeden kervan soymak","İkna yolu ile kervan soymak","Kervanları kimse farketmeden soymak","Kervan başları ile anlaşarak soymak"],["Kimse","Bolu Beyi","Köse Kenan","Telli Nigar"],["Tüccar","Kervan","Çerçi","Çoban"],["Herkesi öldürerek","Kimseye dokunmadan ve görünmeden","Ona karşı gelenleri bayıltarak","Yapamamıştır"],["Toyluğu","Zenginliği","Soyulamamışlığı","Yakışıklılığı"],["Fakirlere","Beylere satılıyordur","Padişaha satılıyordur","Beylere ve padişaha hediye olarak dağıtlıyordur",],["Padişah","Çamlıbel'in Beyi","Bolu Beyi","Çamlıbel'in padişahı"],["Öldürtmüştür","İşkence etmiştir","Yaralarını sarmıştır","Serbest bırakmıştır"],["Çok güzel bir kılıç","En az kır at kadar güzel bir at","Kırk gün kırk gece düğün","Telli Nigar'ı aratmayacak bir kadın"]]

    answerKey=["A","C","B","C","B","D","B","B","C","D","A","A","C","A","D","C","B","D","B","A","C","C","D","C","A","B","A","C","A","B","D","D","A","D","B","A","A","D","B","D","A","C","B","C","C","A","D","C","C"]
    
    var questionID = 0;
    var UserValues = new Object;

    var dedekorkutmodal = document.getElementById('dedekorkutModal');
    var dedekorkutspan = document.getElementById("dedekorkutclose");

    var pazaryerimodal = document.getElementById('pazaryerimodal');
    var pazaryerispan = document.getElementById('pazaryericlose');

    var aksiyonlarmodal = document.getElementById('aksiyonlarmodal');
    var aksiyonlarspan = document.getElementById('aksiyonlarclose');

    var gorevlermodal = document.getElementById('gorevlermodal'); // ADDED
    var gorevlerspan = document.getElementById('gorevlerclose'); // ADDED    
    
    function askNewQues(){
      questionID = Math.floor(Math.random()*sorular.length);
      console.log(questionID);
      QuesToASk = sorular[questionID];
      possibleAns = cevaplar[questionID];
      correctAns = answerKey[questionID];
      document.getElementById("soru").innerHTML = QuesToASk;
      document.getElementById("A").innerHTML = possibleAns[0];
      document.getElementById("B").innerHTML = possibleAns[1];
      document.getElementById("C").innerHTML = possibleAns[2];
      document.getElementById("D").innerHTML = possibleAns[3];
    }

    dedekorkutspan.onclick = function() {
      dedekorkutmodal.style.display = "none";
    }

    pazaryerispan.onclick = function() {
      pazaryerimodal.style.display = "none";
    }

    aksiyonlarspan.onclick = function() {
      aksiyonlarmodal.style.display = "none";
    }
    
    gorevlerspan.onclick = function() {
      gorevlermodal.style.display = "none";
    }    

    function getUserIn(){
      if(window.location.search.split("=")[0] == "?passed"){
        UserValues = {
          level: Number(window.location.search.split("=")[1][1]),
          fightpower: Number(window.location.search.split("=")[1][3] + window.location.search.split("=")[1][4]),
          money: Number(window.location.search.split("=")[1][6] + window.location.search.split("=")[1][7]),
          horse: Number(window.location.search.split("=")[1][9] + window.location.search.split("=")[1][10]),
          health: Number(window.location.search.split("=")[1][13] + window.location.search.split("=")[1][14]),
          food: Number(window.location.search.split("=")[1][17] + window.location.search.split("=")[1][18]),
          market_experience: Number(window.location.search.split("=")[1][20] + window.location.search.split("=")[1][21]),
          war_experience: Number(window.location.search.split("=")[1][24] + window.location.search.split("=")[1][25]),
          horse_experience: Number(window.location.search.split("=")[1][28] + window.location.search.split("=")[1][29])
        }
      } else if (window.location.search.split("=")[0] == "?newuser"){
        UserValues = {
          level: 1,
          fightpower: 10,
          money: 15,
          horse: 1,
          health: 100,
          food: 20,
          market_experience: 1,
          war_experience: 1,
          horse_experience: 50
        }
      }
      return UserValues;
    }

    function getMousePos(canvas, evt) {
      var rect = canvas.getBoundingClientRect();
      return {
        x: evt.clientX - rect.left,
        y: evt.clientY - rect.top
      };
    }

    window.onload = function(){
      UserValues = getUserIn();
      document.getElementById("level").innerHTML = UserValues.level;
      document.getElementById("fightpower").innerHTML = UserValues.fightpower;
      document.getElementById("money").innerHTML = UserValues.money;
      document.getElementById("horse").innerHTML = UserValues.horse;
      document.getElementById("health").innerHTML = UserValues.health;
      document.getElementById("food").innerHTML = UserValues.food;
      document.getElementById("experiences").innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
      

      var canvas = document.getElementById("myCanvas");
      var context = canvas.getContext("2d");

      if (UserValues.level < 3){
        var villagerhouse = document.getElementById("villageimage");
        context.drawImage(villagerhouse, 100, 200, 300, 300);
      } else if (UserValues.level < 5){
        var bursahouse = document.getElementById("houseimage");
        context.drawImage(bursahouse, 250, 170, 250, 200);
      } else {
        var castle=document.getElementById("castleimage");
        context.drawImage(castle, 100, 50);
      }

      var horse = document.getElementById("horseimage");
      for (let i = 0; i < 4; i++) {
        if (i == 0){
          context.drawImage(horse, 1200, 350, 180,180);
        } else {
          context.drawImage(horse, 500 + 200*i, 250 + (50*i), 180,180);
        }
      }

      var ottomanboy = document.getElementById("ottomanboyimage");
      context.drawImage(ottomanboy, 100, 350, 180, 180);

      var dedekorkut = document.getElementById("dedekorkutimage");
      context.drawImage(dedekorkut, 0, 0, 100, 100);
      
      var market = document.getElementById("marketimage");
      context.drawImage(market, 0, 120, 100, 100);

      var aksiyonlar = document.getElementById("aksiyonlarimage");
      context.drawImage(aksiyonlar, 0, 240, 100, 100);

      var todolist = document.getElementById("todoimage");
      context.drawImage(todolist, 1300, 0, 100, 100);

      canvas.addEventListener('click', function(evt) {
      var mousePos = getMousePos(canvas, evt);
      clickOnButton(canvas, mousePos.x, mousePos.y);
    }, false);
    }

    var Para;
    var Yemek;
    var At;
    var Silah;
    var Can;
    
    function clickOnButton(canvas, x, y) {
      var context = canvas.getContext('2d');
      Para = UserValues.money
      At = UserValues.horse
      Yemek = UserValues.food
      Silah = UserValues.fightpower
      Can = UserValues.health
      if (x < 100 && y < 100){
        dedekorkutmodal.style.display = "block";
        askNewQues();
      } else if (x < 100 && y < 220 && y > 120){
        pazaryerimodal.style.display = "block";
      } else if (x < 100 && y < 340 && y > 240){
        aksiyonlarmodal.style.display = "block";
      } else if (x > 1300 && y < 100){
         gorevlermodal.style.display = "block"; //ADDED
      }
      
    }

    function Atsatis() {
      if (At == 0) {
          alert('Atın kalmadı!')
      }else{
        if (UserValues.market_experience > 10){
          Para += 5
          At -= 1
          document.getElementById('demo').innerHTML = 'Paran: ' + Para + ' At sayın: ' + At 
          duzeltme()      
        } else {
          document.getElementById('demo').innerHTML = "At Satacak kadar deneyimli değilsin! En az 10 deneyim kazan."
        }
      }
    }
    
    function Yemekalis() {
      if (Para < 2) {
        alert('Yeterli paran yok!');
      }else{
          Para -= 2;
          Yemek += 1;
      }
      document.getElementById('demo').innerHTML = 'Paran: ' + Para + ' Yemek sayın: ' + Yemek;
      duzeltme()     
    }
    
    function Silahalis() {
      if (Para < 4) {
          alert('Yeterli paran yok!')
      }else{
          Para -= 4
          Silah += 1
      }
      document.getElementById('demo').innerHTML = 'Paran: ' + Para + ' Silah sayın: ' + Silah
      duzeltme()    
    }
    
    function Ilacalis() {
      if (Para < 3) {
          alert('Yeterli paran yok!')
      }else if (Can == 100){
          alert('Canın tam!')
      }else{
        if (UserValues.market_experience > 20){
          Para -= 3
          Can += 10
          document.getElementById('demo').innerHTML = 'Canın 10 kadar arttı!!'   
        } else {
          document.getElementById('demo').innerHTML = 'Aktar ile anlaşıcak kadar deneyimli değilsin! En az 20 deneyim kazan.'   
        }                     
      }
      document.getElementById('demo').innerHTML = 'Paran: ' + Para + ' Canın: ' + Can
      duzeltme()     
    }
    
    function AtYetistirme() {
      if (Yemek == 0){
        alert("Yemeğin Yetersiz!")
      } else {
        Yemek -= 2;
        At += 1;
        document.getElementById('demo2').innerHTML = 'Yemek: ' + Yemek + ' At sayın: ' + At;
        duzeltme()
      }
    }

    function KiratImprove() {
      if (UserValues.level < 2){
        alert("Level 2'de Açılır");
      } else {
        if (UserValues.horse_experience < 20){
          alert("En az 20 yetiştirici deneyimine ihtiyacın var.");
        } else {
          if (Yemek < 3){
            alert("Yetersiz Yemek");
          } else {
            if (Para < 2){
              alert("Yetersiz Para");
            } else {
              Silah += 5;
              Yemek -= 2;
              Para -= 1;
              document.getElementById('demo2').innerHTML = 'Savaş Gücü: ' + Silah + ' Yemek: ' + Yemek + ' Para: ' + Para;
              duzeltme()
            }
          }
        }
      }
    }

    function BattleToBolu() {
      if (UserValues.level < 4){
        alert("Level 4'de Açılır");
      } else {
        if (UserValues.war_experience < 20){
          alert("En az 20 savaşçı deneyimine ihtiyacın var.");
        } else {
          if (Silah < 6){
            alert("Silahın yok. Adamlar topla tüfekle geliyor. Taş mı atacaksın?!?");
          } else {
            if (Can < 6){
              alert("Bu aksiyonu gerçekleştirecek kadar sağlıklı değilsiniz!");
            } else {
              Silah -= 5;
              Can -= Math.floor(Math.random() * 6) + 1; ;
              Para += Math.floor(Math.random() * 10) + 1;
              document.getElementById('demo2').innerHTML = 'Savaş Gücü: ' + Silah + ' Can: ' + Can + ' Para: ' + Para;
              duzeltme()
            }
          }
        }
      }
    }

    function RobberyforKervan() {
      paraaraligi = [1 , 2 , 3 , 4]
      var kazanc = paraaraligi[Math.floor(Math.random()*paraaraligi.length)];

      if (UserValues.level < 5){
        alert("Level 5'de Açılır");
      } else {
        if (UserValues.war_experience < 35){
          alert("En az 35 savaşçı deneyimine ihtiyacın var.");
        } else {
          if (Silah < 10){
            alert("Silahın yok. Adamlar topla tüfekle geliyor. Taş mı atacaksın?!?");
          } else {
            if (Can < 6){
              alert("Bu aksiyonu gerçekleştirecek kadar sağlıklı değilsiniz!");
            } else {
              Silah -= 5;
              Can -= Math.floor(Math.random() * 6) + 1;
              Para += kazanc
              document.getElementById('demo2').innerHTML = 'Kazandığın para : ' + kazanc + ' altın.'
              duzeltme()
            }
          }
        }
      }
    }

    function duzeltme() {
      UserValues.food = Yemek
      UserValues.health = Can
      UserValues.fightpower = Silah
      UserValues.horse = At
      UserValues.money = Para
      document.getElementById('health').innerHTML = UserValues.health
      document.getElementById('fightpower').innerHTML = UserValues.fightpower
      document.getElementById('money').innerHTML = UserValues.money
      document.getElementById('horse').innerHTML = UserValues.horse
      document.getElementById('food').innerHTML = UserValues.food
    }
    
    function answered(answer){
      if (answer == answerKey[questionID]) {
        UserValues.horse_experience += 1;
        UserValues.market_experience += 1;
        UserValues.war_experience += 1;
        document.getElementById("demo3").innerHTML = "Tüm Deneyimlerin 1 arttı!"; 
      } else {
        document.getElementById("demo3").innerHTML = "Cevabı bilemedin. Doğru cevap "+answerKey[questionID]+" olacaktı."; 
      }
      askNewQues();
    }

        //Bu variablelar görevi yapıp yapmadığını kontrol etmek için var
    var g_ara
    var g1
    var g2
    var g3
    var g4
    var g5
    var g6
    var g7
    var g8

    g1 = true
    g2 = false
    g3 = false
    g4 = false
    g5 = false
    g6 = false
    g7 = false
    g8 = false


    function gorev_1() {
      if (Can > 20){
        if (g1 = true){
          g2 = true
          UserValues.level += 1
          Can -= 20
          Para += 10
          UserValues.war_experience += 10
          UserValues.market_experience += 10
          UserValues.horse_experience += 5
          duzeltme()
          document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
          document.getElementById('level').innerHTML = UserValues.level
        }
      }else{
        alert('Yeterli Canın Yok!')
      }
    }

    function gorev_2() {
      if (Can > 20){
        if (UserValues.level = 2){
          if (g2 = true){
            g3 = true
            UserValues.level += 1
            Can -= 20
            Para += 10
            UserValues.war_experience += 10
            UserValues.market_experience += 5
            UserValues.horse_experience += 5
            duzeltme()
            document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
            document.getElementById('level').innerHTML = UserValues.level
          }else{
            alert('İlk olarak önceki görevleri yapmalısın!')
          }
        }else{
          alert('Seviyen henüz 2 değil!')
        }
      }else{
        alert('Yeterli Canın Yok!')
      }
    }

    function gorev_3() {
      if (Can > 20){
        if (UserValues.level = 3){
          if (g3 = true){
            g4 = true
            UserValues.level += 1
            Can -= 20
            Para += 10
            UserValues.war_experience += 15
            UserValues.market_experience += 5
            UserValues.horse_experience += 10
            duzeltme()
            document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
            document.getElementById('level').innerHTML = UserValues.level
          }else{
            alert('İlk olarak önceki görevleri yapmalısın!')
          }
        }else{
          alert ('Seviyen henüz 3 değil!')
        }
      }else{
        alert('Yeterli Canın Yok!')
      }
    }

    function gorev_4() {
      if (Can > 20){
        if (UserValues.level = 4){
          if (g4 = true){
            g5 = true
            UserValues.level += 1
            Can -= 20
            Para += 10
            UserValues.war_experience += 10
            UserValues.market_experience += 3
            UserValues.horse_experience += 15
            duzeltme()
            document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
            document.getElementById('level').innerHTML = UserValues.level
          }else{
            alert('İlk olarak önceki görevleri yapmalısın!')
          }
        }else{
          alert ('Seviyen henüz 4 değil!')
        }
      }else{
        alert('Yeterli Canın Yok!')
      }
    }

    function gorev_5() {
      if (Can > 20){
        if (UserValues.level = 5){
          if (g5 = true){
            g6 = true
            UserValues.level += 1
            Can -= 20
            Para += 10
            UserValues.war_experience += 10
            UserValues.market_experience += 3
            UserValues.horse_experience += 3
            duzeltme()
            document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
            document.getElementById('level').innerHTML = UserValues.level
          }else{
            alert('İlk olarak önceki görevleri yapmalısın!')
          }
        }else{
          alert ('Seviyen henüz 5 değil!')
        }
      }else{
        alert('Yeterli Canın Yok!')
      }
    }

    function gorev_6() {
      if (Can > 20){
        if (UserValues.level = 6){
          if (g6 = true){
            g7 = true
            UserValues.level += 1
            Can -= 20
            Para += 10
            UserValues.war_experience += 5
            UserValues.market_experience += 10
            UserValues.horse_experience += 5
            duzeltme()
            document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
            document.getElementById('level').innerHTML = UserValues.level
          }else{
            alert('İlk olarak önceki görevleri yapmalısın!')
          }
        }else{
          alert ('Seviyen henüz 6 değil!')
        }
      }else{
        alert('Yeterli Canın Yok!')
      }
    }

    function gorev_7() {
      if (Can > 20){
        if (UserValues.level = 7){
          if (g7 = true){
            g8 = true
            UserValues.level += 1
            Can -= 20
            Para += 10
            UserValues.war_experience += 0
            UserValues.market_experience += 5
            UserValues.horse_experience += 5
            duzeltme()
            document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
            document.getElementById('level').innerHTML = UserValues.level
          }else{
            alert('İlk olarak önceki görevleri yapmalısın!')
          }
        }else{
          alert ('Seviyen henüz 7 değil!')
        }
      }else{
        alert('Yeterli Canın Yok!')
      }
    }

    function gorev_8() {
      if (Can > 20){
        if (UserValues.level = 8){
          if (g8 = true){
            UserValues.level += 1
            Can -= 20
            Para += 10
            UserValues.war_experience = 99
            UserValues.market_experience = 99
            UserValues.horse_experience = 99 
            duzeltme()
            document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
            document.getElementById('level').innerHTML = UserValues.level
          }else{
            alert('İlk olarak önceki görevleri yapmalısın!')
          }
        }else{
          alert ('Seviyen henüz 8 değil!')
        }
      }else{
        alert('Yeterli Canın Yok!')
      }
    }


    function gorev_ara() {
      Para += 5
      UserValues.war_experience += 3
      UserValues.market_experience += 4
      UserValues.horse_experience += 2
      duzeltme()
      document.getElementById('experiences').innerHTML = "Ticari: " + UserValues.market_experience + " | Savaşçı: " + UserValues.war_experience + " | Yetiştirici: " + UserValues.horse_experience;
    }
    
  </script>
  </body>
</html>


